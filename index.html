<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Phaistos Decoding Tool</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <h1>Phaistos Disc Decoding Tool</h1>
    <input type="file" id="fileInput">
    <button onclick="storeFile()">Upload File</button>

    <br><br>
    
    <label for="diskModeSelect">Select Disk Mode:</label>
    <select id="diskModeSelect" onchange="changeDiskMode()">
        <option value="default">Default</option>
        <option value="vegas">Vegas</option>
    </select>

    <br><br>

    <button onclick="showDetailView()" id="detailButton">Show Detailed View</button>
    <br>

    <div hidden id="detailedView">
        <h3>Detailed Substitution View</h3>
        <button onclick="clearSubstitutions()">Clear Substitutions</button>
        <br><br>
        <div>
            <pre style="display: inline;">&#x101D0:</pre> <input type="text" id="substitution1" placeholder="" style="display: inline; width: 2em;"> <pre style="display:inline;">  </pre>
            <pre style="display: inline;">&#x101D1:</pre> <input type="text" id="substitution2" placeholder="" style="display: inline; width: 2em;"> <pre style="display:inline;">  </pre>
            <pre style="display: inline;">&#x101D2:</pre> <input type="text" id="substitution3" placeholder="" style="display: inline; width: 2em;"> <pre style="display:inline;">  </pre>
            <pre style="display: inline;">&#x101D3:</pre> <input type="text" id="substitution4" placeholder="" style="display: inline; width: 2em;"> <pre style="display:inline;">  </pre>
            <pre style="display: inline;">&#x101D4:</pre> <input type="text" id="substitution5" placeholder="" style="display: inline; width: 2em;"> <pre style="display:inline;">  </pre>
            <pre style="display: inline;">&#x101D5:</pre> <input type="text" id="substitution6" placeholder="" style="display: inline; width: 2em;"> <pre style="display:inline;">  </pre>
            <pre style="display: inline;">&#x101D6:</pre> <input type="text" id="substitution7" placeholder="" style="display: inline; width: 2em;"> <pre style="display:inline;">  </pre>
            <pre style="display: inline;">&#x101D7:</pre> <input type="text" id="substitution8" placeholder="" style="display: inline; width: 2em;"> <pre style="display:inline;">  </pre>
            <pre style="display: inline;">&#x101D8:</pre> <input type="text" id="substitution9" placeholder="" style="display: inline; width: 2em;"> <pre style="display:inline;">  </pre>
            <pre style="display: inline;">&#x101D9:</pre> <input type="text" id="substitution10" placeholder="" style="display: inline; width: 2em;"> <pre style="display:inline;">  </pre>
            <pre style="display: inline;">&#x101DA:</pre> <input type="text" id="substitution11" placeholder="" style="display: inline; width: 2em;"> <pre style="display:inline;">  </pre>
            <pre style="display: inline;">&#x101DB:</pre> <input type="text" id="substitution12" placeholder="" style="display: inline; width: 2em;"> <pre style="display:inline;">  </pre>
        </div>
        <br>
        <div>
            <pre style="display: inline;">&#x101DC:</pre> <input type="text" id="substitution13" placeholder="" style="display: inline; width: 2em;"> <pre style="display:inline;">  </pre>
            <pre style="display: inline;">&#x101DD:</pre> <input type="text" id="substitution14" placeholder="" style="display: inline; width: 2em;"> <pre style="display:inline;">  </pre>
            <pre style="display: inline;">&#x101DE:</pre> <input type="text" id="substitution15" placeholder="" style="display: inline; width: 2em;"> <pre style="display:inline;">  </pre>
            <pre style="display: inline;">&#x101DF:</pre> <input type="text" id="substitution16" placeholder="" style="display: inline; width: 2em;"> <pre style="display:inline;">  </pre>
            <pre style="display: inline;">&#x101E0:</pre> <input type="text" id="substitution17" placeholder="" style="display: inline; width: 2em;"> <pre style="display:inline;">  </pre>
            <pre style="display: inline;">&#x101E1:</pre> <input type="text" id="substitution18" placeholder="" style="display: inline; width: 2em;"> <pre style="display:inline;">  </pre>
            <pre style="display: inline;">&#x101E2:</pre> <input type="text" id="substitution19" placeholder="" style="display: inline; width: 2em;"> <pre style="display:inline;">  </pre>
            <pre style="display: inline;">&#x101E3:</pre> <input type="text" id="substitution20" placeholder="" style="display: inline; width: 2em;"> <pre style="display:inline;">  </pre>
            <pre style="display: inline;">&#x101E4:</pre> <input type="text" id="substitution21" placeholder="" style="display: inline; width: 2em;"> <pre style="display:inline;">  </pre>
            <pre style="display: inline;">&#x101E5:</pre> <input type="text" id="substitution22" placeholder="" style="display: inline; width: 2em;"> <pre style="display:inline;">  </pre>
            <pre style="display: inline;">&#x101E6:</pre> <input type="text" id="substitution23" placeholder="" style="display: inline; width: 2em;"> <pre style="display:inline;">  </pre>
            <pre style="display: inline;">&#x101E7:</pre> <input type="text" id="substitution24" placeholder="" style="display: inline; width: 2em;"> <pre style="display:inline;">  </pre>
        </div>
        <br>
        <div>
            <pre style="display: inline;">&#x101E8:</pre> <input type="text" id="substitution25" placeholder="" style="display: inline; width: 2em;"> <pre style="display:inline;">  </pre>
            <pre style="display: inline;">&#x101E9:</pre> <input type="text" id="substitution26" placeholder="" style="display: inline; width: 2em;"> <pre style="display:inline;">  </pre>
            <pre style="display: inline;">&#x101EA:</pre> <input type="text" id="substitution27" placeholder="" style="display: inline; width: 2em;"> <pre style="display:inline;">  </pre>
            <pre style="display: inline;">&#x101EB:</pre> <input type="text" id="substitution28" placeholder="" style="display: inline; width: 2em;"> <pre style="display:inline;">  </pre>
            <pre style="display: inline;">&#x101EC:</pre> <input type="text" id="substitution29" placeholder="" style="display: inline; width: 2em;"> <pre style="display:inline;">  </pre>
            <pre style="display: inline;">&#x101ED:</pre> <input type="text" id="substitution30" placeholder="" style="display: inline; width: 2em;"> <pre style="display:inline;">  </pre>
            <pre style="display: inline;">&#x101EE:</pre> <input type="text" id="substitution31" placeholder="" style="display: inline; width: 2em;"> <pre style="display:inline;">  </pre>
            <pre style="display: inline;">&#x101EF:</pre> <input type="text" id="substitution32" placeholder="" style="display: inline; width: 2em;"> <pre style="display:inline;">  </pre>
            <pre style="display: inline;">&#x101F0:</pre> <input type="text" id="substitution33" placeholder="" style="display: inline; width: 2em;"> <pre style="display:inline;">  </pre>
            <pre style="display: inline;">&#x101F1:</pre> <input type="text" id="substitution34" placeholder="" style="display: inline; width: 2em;"> <pre style="display:inline;">  </pre>
            <pre style="display: inline;">&#x101F2:</pre> <input type="text" id="substitution35" placeholder="" style="display: inline; width: 2em;"> <pre style="display:inline;">  </pre>
            <pre style="display: inline;">&#x101F3:</pre> <input type="text" id="substitution36" placeholder="" style="display: inline; width: 2em;"> <pre style="display:inline;">  </pre>
        </div>
        <br>
        <div>
            <pre style="display: inline;">&#x101F4:</pre> <input type="text" id="substitution37" placeholder="" style="display: inline; width: 2em;"> <pre style="display:inline;">  </pre>
            <pre style="display: inline;">&#x101F5:</pre> <input type="text" id="substitution38" placeholder="" style="display: inline; width: 2em;"> <pre style="display:inline;">  </pre>
            <pre style="display: inline;">&#x101F6:</pre> <input type="text" id="substitution39" placeholder="" style="display: inline; width: 2em;"> <pre style="display:inline;">  </pre>
            <pre style="display: inline;">&#x101F7:</pre> <input type="text" id="substitution40" placeholder="" style="display: inline; width: 2em;"> <pre style="display:inline;">  </pre>
            <pre style="display: inline;">&#x101F8:</pre> <input type="text" id="substitution41" placeholder="" style="display: inline; width: 2em;"> <pre style="display:inline;">  </pre>
            <pre style="display: inline;">&#x101F9:</pre> <input type="text" id="substitution42" placeholder="" style="display: inline; width: 2em;"> <pre style="display:inline;">  </pre>
            <pre style="display: inline;">&#x101FA:</pre> <input type="text" id="substitution43" placeholder="" style="display: inline; width: 2em;"> <pre style="display:inline;">  </pre>
            <pre style="display: inline;">&#x101FB:</pre> <input type="text" id="substitution44" placeholder="" style="display: inline; width: 2em;"> <pre style="display:inline;">  </pre>
            <pre style="display: inline;">&#x101FC:</pre> <input type="text" id="substitution45" placeholder="" style="display: inline; width: 2em;"> <pre style="display:inline;">  </pre>
            <!--- For some reason substitions for the damage mark does not work, this can be a future thing to fix and look into -->
            <!--- <pre style="display: inline;">Damage:</pre> <input type="text" id="substitution46" placeholder="" style="display: inline; width: 2em;"> <pre style="display:inline;">  </pre> -->
        </div>
    </div>

    <br><br>

    <button onclick="createHangman()">Create Hangman</button>
    <h2>Created Hangman Combination</h2>
    <pre id="hangman"></pre>

    <script>
        let uploadedFile;
        let diskMode = "default";
        let detailedMode = false;

        class PhaistosSymbol {
            constructor(index, vegas = false, capital = false, vowel = false) {
            this.index = index;
            this.vegas = vegas;
            this.capital = capital;
            this.vowel = vowel;
            }
        }
    
        function storeFile() {
            const fileInput = document.getElementById('fileInput');
            if (fileInput.files.length > 0) {
                uploadedFile = fileInput.files[0];
                console.log('File stored:', uploadedFile);
            } else {
                console.log('No file selected');
            }
        }

        function changeDiskMode() {
            const selectElement = document.getElementById('diskModeSelect');
            diskMode = selectElement.value;
            console.log('Disk mode changed to:', diskMode);
        }

        function showDetailView() {
            const detailedView = document.getElementById('detailedView');
            detailedMode = !detailedMode;
            detailedView.hidden = !detailedMode;
            detailButton.innerText = detailedMode ? 'Hide Detailed View' : 'Show Detailed View';
        }

        function clearSubstitutions(){
            for(let i = 1; i <= 46; i++){
                document.getElementById('substitution' + i).value = '';
            }
        }

        function createHangman() {
            if (!uploadedFile) {
            console.log('No file uploaded');
            return;
            }

            const reader = new FileReader();
            reader.onload = function(event) {
                const fileContent = event.target.result;
                var uniqueContent = hangmanForWebsite(fileContent);
                document.getElementById('hangman').innerHTML = uniqueContent;
            };

            reader.readAsText(uploadedFile);
        }

        function hangmanForWebsite(fileContent) {
            // Data Cleaning
            const rows = fileContent.split('\n');
            const cleanedRows = rows.map(row => {
                return row.split(',').map(cell => cell.trim() === 'NA' || cell.trim() === 'NaN' ? '' : cell).join(',');
            });
            const columns = [];
            const numColumns = cleanedRows[0].split(',').length;
            for (let i = 0; i < numColumns; i++) {
                const column = cleanedRows.map(row => row.split(',')[i]);
                columns.push(column.join(','));
            }
            const subList = [];

            // Loop through each column, creating a list of possible substitutions
            columns.forEach(column => {
                const uniqueSubs = new Set();
                column.split(',').forEach(cell => {
                    if (cell !== '' && cell !== '\r\n' && cell !== '\n' && cell !== '\r') {
                        uniqueSubs.add(cell.replace(/\r?\n|\r/g, ""));
                    }
                });
                subList.push(Array.from(uniqueSubs));
                uniqueSubs.clear();
            });

            // Select a random substitution from each list and pass it to hangman creation function
            let substitutions = [];
            for (let i = 1; i < subList.length; i++) {
                // If there is a substitution override in the detailed view, use that
                let override = document.getElementById('substitution' + i).value;
                if(override !== ''){
                    substitutions.push(override);
                // If the list only contains the index, there are no substitutions
                } else if (subList[i].length === 1) {
                    substitutions.push("Unsubstituted");
                // There must be a list of substitutions to choose from, select on randomly
                } else {
                    const randomIndex = Math.floor(Math.random() * subList[i].length + 1);
                    if (subList[i][randomIndex] === undefined) {
                        substitutions.push(subList[i][randomIndex - 1]);
                    } else {
                        substitutions.push(subList[i][randomIndex]);
                    }
                }
            }
            substitutions = substitutions.join(',');

            return hangmanSubstitution(substitutions, diskMode);
        }

        function hangmanSubstitution(substitutions, diskOption = "default"){
            // Variable declarations
            let singleSubs = [], subTracker = [], diskSymbols = [], possibleSymbols = [], possibleVegasSymbols = [], possibleVowelSymbols = [], hexSymbols = [], returnString = "";
            
            // Selecting version of disk to substitute
            if(diskOption === "default"){
                diskSymbols = [[new PhaistosSymbol(38), new PhaistosSymbol(3), new PhaistosSymbol(10), '|', new PhaistosSymbol(1), new PhaistosSymbol(13), '|', new PhaistosSymbol(21), new PhaistosSymbol(37), new PhaistosSymbol(35), new PhaistosSymbol(27), new PhaistosSymbol(27), new PhaistosSymbol(12), new PhaistosSymbol(2), '|', new PhaistosSymbol(38), new PhaistosSymbol(3), new PhaistosSymbol(10), '|', new PhaistosSymbol(35), new PhaistosSymbol(19), new PhaistosSymbol(23), '|', new PhaistosSymbol(1), new PhaistosSymbol(13), new PhaistosSymbol(12), new PhaistosSymbol(2), '|', new PhaistosSymbol(12), new PhaistosSymbol(26), new PhaistosSymbol(31)],
                        [new PhaistosSymbol(19), new PhaistosSymbol(17), new PhaistosSymbol(18), new PhaistosSymbol(6), '|', new PhaistosSymbol(27), new PhaistosSymbol(18), new PhaistosSymbol(32), new PhaistosSymbol(14), new PhaistosSymbol(27), new PhaistosSymbol(12), new PhaistosSymbol(2), '|', new PhaistosSymbol(26), new PhaistosSymbol(31), new PhaistosSymbol(12), new PhaistosSymbol(2), '|', new PhaistosSymbol(1), new PhaistosSymbol(28), '|', new PhaistosSymbol(18), new PhaistosSymbol(22), new PhaistosSymbol(10), new PhaistosSymbol(25), new PhaistosSymbol(27), new PhaistosSymbol(2), '|', new PhaistosSymbol(26), new PhaistosSymbol(31), new PhaistosSymbol(12), new PhaistosSymbol(2)],
                        [new PhaistosSymbol(23), new PhaistosSymbol(33), '|', new PhaistosSymbol(21), new PhaistosSymbol(37), new PhaistosSymbol(35), new PhaistosSymbol(27), new PhaistosSymbol(27), new PhaistosSymbol(12), new PhaistosSymbol(2), '|', new PhaistosSymbol(26), new PhaistosSymbol(31), new PhaistosSymbol(12), new PhaistosSymbol(2), '|', new PhaistosSymbol(1), new PhaistosSymbol(28), '|', new PhaistosSymbol(18), new PhaistosSymbol(23), new PhaistosSymbol(10), new PhaistosSymbol(25), new PhaistosSymbol(27), new PhaistosSymbol(2), '|', new PhaistosSymbol(11), new PhaistosSymbol(39)],
                        [new PhaistosSymbol(38), new PhaistosSymbol(23), new PhaistosSymbol(32), new PhaistosSymbol(12), new PhaistosSymbol(2), '|', new PhaistosSymbol(7), new PhaistosSymbol(40), new PhaistosSymbol(41), new PhaistosSymbol(1), '|', new PhaistosSymbol(35), new PhaistosSymbol(19), new PhaistosSymbol(41), new PhaistosSymbol(12), new PhaistosSymbol(2), '|', new PhaistosSymbol(35), new PhaistosSymbol(26), new PhaistosSymbol(31), '|', new PhaistosSymbol(46), new PhaistosSymbol(18), new PhaistosSymbol(6), new PhaistosSymbol(12), new PhaistosSymbol(2), '|', new PhaistosSymbol(2), new PhaistosSymbol(44), new PhaistosSymbol(27)],
                        [new PhaistosSymbol(12), new PhaistosSymbol(7), new PhaistosSymbol(45), new PhaistosSymbol(27), '|', new PhaistosSymbol(33), new PhaistosSymbol(40), new PhaistosSymbol(4), new PhaistosSymbol(12), new PhaistosSymbol(2), '|', new PhaistosSymbol(34), new PhaistosSymbol(29), new PhaistosSymbol(29), '|', new PhaistosSymbol(7), new PhaistosSymbol(45), new PhaistosSymbol(29), '|', new PhaistosSymbol(12), new PhaistosSymbol(40), new PhaistosSymbol(24), '|', new PhaistosSymbol(18), new PhaistosSymbol(1), new PhaistosSymbol(13), new PhaistosSymbol(12), new PhaistosSymbol(2)],
                        [new PhaistosSymbol(7), new PhaistosSymbol(45), '|', new PhaistosSymbol(25), new PhaistosSymbol(23), new PhaistosSymbol(34), new PhaistosSymbol(29), '|', new PhaistosSymbol(7), new PhaistosSymbol(23), new PhaistosSymbol(35), new PhaistosSymbol(6), new PhaistosSymbol(2), '|', new PhaistosSymbol(7), new PhaistosSymbol(18), new PhaistosSymbol(39), new PhaistosSymbol(30), new PhaistosSymbol(9), '|', new PhaistosSymbol(8), new PhaistosSymbol(7), new PhaistosSymbol(36), new PhaistosSymbol(29), new PhaistosSymbol(22), '|', new PhaistosSymbol(24), new PhaistosSymbol(18), new PhaistosSymbol(23), new PhaistosSymbol(7)],
                        [new PhaistosSymbol(7), new PhaistosSymbol(45), new PhaistosSymbol(7), '|', new PhaistosSymbol(35), new PhaistosSymbol(18), new PhaistosSymbol(7), '|', new PhaistosSymbol(25), new PhaistosSymbol(23), new PhaistosSymbol(34), new PhaistosSymbol(27), '|', new PhaistosSymbol(8), new PhaistosSymbol(7), new PhaistosSymbol(36), new PhaistosSymbol(29), new PhaistosSymbol(22), '|', new PhaistosSymbol(7), new PhaistosSymbol(25), new PhaistosSymbol(29), '|', new PhaistosSymbol(13), new PhaistosSymbol(8), new PhaistosSymbol(29)],
                        [new PhaistosSymbol(8), new PhaistosSymbol(7), new PhaistosSymbol(36), new PhaistosSymbol(29), '|', new PhaistosSymbol(1), new PhaistosSymbol(27), new PhaistosSymbol(9), new PhaistosSymbol(2), '|', new PhaistosSymbol(33), new PhaistosSymbol(39), new PhaistosSymbol(32), new PhaistosSymbol(35), new PhaistosSymbol(6), '|', new PhaistosSymbol(1), new PhaistosSymbol(33), new PhaistosSymbol(29), '|', new PhaistosSymbol(18), new PhaistosSymbol(14), new PhaistosSymbol(16), '|', new PhaistosSymbol(35), new PhaistosSymbol(20), new PhaistosSymbol(24), new PhaistosSymbol(24), new PhaistosSymbol(29)],
                        [new PhaistosSymbol(1), new PhaistosSymbol(38), new PhaistosSymbol(25), new PhaistosSymbol(27), '|', new PhaistosSymbol(40), new PhaistosSymbol(36), new PhaistosSymbol(26), new PhaistosSymbol(2), '|', new PhaistosSymbol(35), new PhaistosSymbol(40), new PhaistosSymbol(24), new PhaistosSymbol(7), '|', new PhaistosSymbol(25), new PhaistosSymbol(42), new PhaistosSymbol(37), new PhaistosSymbol(22), '|', new PhaistosSymbol(18), new PhaistosSymbol(1), new PhaistosSymbol(13), new PhaistosSymbol(7), new PhaistosSymbol(15), '|', new PhaistosSymbol(33), new PhaistosSymbol(39), new PhaistosSymbol(1)],
                        [new PhaistosSymbol(43), new PhaistosSymbol(18), new PhaistosSymbol(23), new PhaistosSymbol(16), '|', new PhaistosSymbol(12), new PhaistosSymbol(20), new PhaistosSymbol(24), new PhaistosSymbol(33), '|', new PhaistosSymbol(27), new PhaistosSymbol(25), new PhaistosSymbol(22), '|', new PhaistosSymbol(5), new PhaistosSymbol(23), new PhaistosSymbol(37), new PhaistosSymbol(2), '|', new PhaistosSymbol(35), new PhaistosSymbol(7), new PhaistosSymbol(45), new PhaistosSymbol(27), '|', new PhaistosSymbol(7), new PhaistosSymbol(40), new PhaistosSymbol(22), new PhaistosSymbol(12), new PhaistosSymbol(2)]];
            } else if(diskOption === "vegas"){
                diskSymbols = [[new PhaistosSymbol(38), new PhaistosSymbol(3), new PhaistosSymbol(10), '|', new PhaistosSymbol(1, vowel=true), new PhaistosSymbol(13), '|', new PhaistosSymbol(21), new PhaistosSymbol(37), new PhaistosSymbol(35, vowel=true), new PhaistosSymbol(27, vegas=true), new PhaistosSymbol(27, vegas=true), new PhaistosSymbol(12), new PhaistosSymbol(2, vegas=true), '|', new PhaistosSymbol(38), new PhaistosSymbol(3), new PhaistosSymbol(10), '|', new PhaistosSymbol(35, vowel=true), new PhaistosSymbol(19), new PhaistosSymbol(23, vowel=true), '|', new PhaistosSymbol(1, vowel=true), new PhaistosSymbol(13), new PhaistosSymbol(12), new PhaistosSymbol(2, vegas=true), '|', new PhaistosSymbol(12), new PhaistosSymbol(26, vowel=true), new PhaistosSymbol(31, vegas=true)],
                    [new PhaistosSymbol(19), new PhaistosSymbol(17), new PhaistosSymbol(18), new PhaistosSymbol(6), '|', new PhaistosSymbol(27, vegas=true), new PhaistosSymbol(18), new PhaistosSymbol(32), new PhaistosSymbol(14), new PhaistosSymbol(27, vegas=true), new PhaistosSymbol(12), new PhaistosSymbol(2, vegas=true), '|', new PhaistosSymbol(26, vowel=true), new PhaistosSymbol(31, vegas=true), new PhaistosSymbol(12), new PhaistosSymbol(2, vegas=true), '|', new PhaistosSymbol(1, vowel=true), new PhaistosSymbol(28, vowel=true), '|', new PhaistosSymbol(18), new PhaistosSymbol(22), new PhaistosSymbol(10), new PhaistosSymbol(25), new PhaistosSymbol(27, vegas=true), new PhaistosSymbol(2, vegas=true), '|', new PhaistosSymbol(26, vowel=true), new PhaistosSymbol(31, vegas=true), new PhaistosSymbol(12), new PhaistosSymbol(2, vegas=true)],
                    [new PhaistosSymbol(23, vowel=true), new PhaistosSymbol(33, vowel=true), '|', new PhaistosSymbol(21), new PhaistosSymbol(37), new PhaistosSymbol(35, vowel=true), new PhaistosSymbol(27, vegas=true), new PhaistosSymbol(27, vegas=true), new PhaistosSymbol(12), new PhaistosSymbol(2, vegas=true), '|', new PhaistosSymbol(26, vowel=true), new PhaistosSymbol(31, vegas=true), new PhaistosSymbol(12), new PhaistosSymbol(2, vegas=true), '|', new PhaistosSymbol(1, vowel=true), new PhaistosSymbol(28, vowel=true), '|', new PhaistosSymbol(18), new PhaistosSymbol(23, vowel=true), new PhaistosSymbol(10), new PhaistosSymbol(25), new PhaistosSymbol(27, vegas=true), new PhaistosSymbol(2, vegas=true), '|', new PhaistosSymbol(11, vowel=true), new PhaistosSymbol(39, vowel=true)],
                    [new PhaistosSymbol(38), new PhaistosSymbol(23, vowel=true), new PhaistosSymbol(32), new PhaistosSymbol(12), new PhaistosSymbol(2, vegas=true), '|', new PhaistosSymbol(7, vowel=true), new PhaistosSymbol(40), new PhaistosSymbol(41), new PhaistosSymbol(1, vowel=true), '|', new PhaistosSymbol(35, vowel=true), new PhaistosSymbol(19), new PhaistosSymbol(41), new PhaistosSymbol(12), new PhaistosSymbol(2, vegas=true), '|', new PhaistosSymbol(35, vowel=true), new PhaistosSymbol(26, vowel=true), new PhaistosSymbol(31, vegas=true), '|', new PhaistosSymbol(46), new PhaistosSymbol(18), new PhaistosSymbol(6), new PhaistosSymbol(12), new PhaistosSymbol(2, vegas=true), '|', new PhaistosSymbol(2, vegas=true), new PhaistosSymbol(44), new PhaistosSymbol(27, vegas=true)],
                    [new PhaistosSymbol(12), new PhaistosSymbol(7, vowel=true), new PhaistosSymbol(45, vowel=true), new PhaistosSymbol(27, vegas=true), '|', new PhaistosSymbol(33, vowel=true), new PhaistosSymbol(40), new PhaistosSymbol(4), new PhaistosSymbol(12), new PhaistosSymbol(2, vegas=true), '|', new PhaistosSymbol(34), new PhaistosSymbol(29, vegas=true), new PhaistosSymbol(29, vegas=true), '|', new PhaistosSymbol(7, vowel=true), new PhaistosSymbol(45, vowel=true), new PhaistosSymbol(29, vegas=true), '|', new PhaistosSymbol(12), new PhaistosSymbol(40), new PhaistosSymbol(24), '|', new PhaistosSymbol(18), new PhaistosSymbol(1, vowel=true), new PhaistosSymbol(13), new PhaistosSymbol(12), new PhaistosSymbol(2, vegas=true)],
                    [new PhaistosSymbol(7, vowel=true), new PhaistosSymbol(45, vowel=true), '|', new PhaistosSymbol(25), new PhaistosSymbol(23, vowel=true), new PhaistosSymbol(34), new PhaistosSymbol(29, vegas=true), '|', new PhaistosSymbol(7, vowel=true), new PhaistosSymbol(23, vowel=true), new PhaistosSymbol(35, vowel=true), new PhaistosSymbol(6), new PhaistosSymbol(2, vegas=true), '|', new PhaistosSymbol(7, vowel=true), new PhaistosSymbol(18), new PhaistosSymbol(39, vowel=true), new PhaistosSymbol(30), new PhaistosSymbol(9), '|', new PhaistosSymbol(8, vowel=true), new PhaistosSymbol(7, vowel=true), new PhaistosSymbol(36), new PhaistosSymbol(29, vegas=true), new PhaistosSymbol(22), '|', new PhaistosSymbol(24), new PhaistosSymbol(18), new PhaistosSymbol(23, vowel=true), new PhaistosSymbol(7, vowel=true)],
                    [new PhaistosSymbol(7, vowel=true), new PhaistosSymbol(45, vowel=true), new PhaistosSymbol(7, vowel=true), '|', new PhaistosSymbol(35, vowel=true), new PhaistosSymbol(18), new PhaistosSymbol(7, vowel=true), '|', new PhaistosSymbol(25), new PhaistosSymbol(23, vowel=true), new PhaistosSymbol(34), new PhaistosSymbol(27, vegas=true), '|', new PhaistosSymbol(8, vowel=true), new PhaistosSymbol(7, vowel=true), new PhaistosSymbol(36), new PhaistosSymbol(29, vegas=true), new PhaistosSymbol(22), '|', new PhaistosSymbol(7, vowel=true), new PhaistosSymbol(25), new PhaistosSymbol(29, vegas=true), '|', new PhaistosSymbol(13), new PhaistosSymbol(8, vowel=true), new PhaistosSymbol(29, vegas=true)],
                    [new PhaistosSymbol(8, vowel=true), new PhaistosSymbol(7, vowel=true), new PhaistosSymbol(36), new PhaistosSymbol(29, vegas=true), '|', new PhaistosSymbol(1, vowel=true), new PhaistosSymbol(27, vegas=true), new PhaistosSymbol(9), new PhaistosSymbol(2, vegas=true), '|', new PhaistosSymbol(33, vowel=true), new PhaistosSymbol(39, vowel=true), new PhaistosSymbol(32), new PhaistosSymbol(35, vowel=true), new PhaistosSymbol(6), '|', new PhaistosSymbol(1, vowel=true), new PhaistosSymbol(33, vowel=true), new PhaistosSymbol(29, vegas=true), '|', new PhaistosSymbol(18), new PhaistosSymbol(14), new PhaistosSymbol(16), '|', new PhaistosSymbol(35, vowel=true), new PhaistosSymbol(20), new PhaistosSymbol(24), new PhaistosSymbol(24), new PhaistosSymbol(29, vegas=true)],
                    [new PhaistosSymbol(1, vowel=true), new PhaistosSymbol(38), new PhaistosSymbol(25), new PhaistosSymbol(27, vegas=true), '|', new PhaistosSymbol(40), new PhaistosSymbol(36), new PhaistosSymbol(26, vowel=true), new PhaistosSymbol(2, vegas=true), '|', new PhaistosSymbol(35, vowel=true), new PhaistosSymbol(40), new PhaistosSymbol(24), new PhaistosSymbol(7, vowel=true), '|', new PhaistosSymbol(25), new PhaistosSymbol(42), new PhaistosSymbol(37), new PhaistosSymbol(22), '|', new PhaistosSymbol(18), new PhaistosSymbol(1, vowel=true), new PhaistosSymbol(13), new PhaistosSymbol(7, vowel=true), new PhaistosSymbol(15), '|', new PhaistosSymbol(33, vowel=true), new PhaistosSymbol(39, vowel=true), new PhaistosSymbol(1, vowel=true)],
                    [new PhaistosSymbol(43, vowel=true), new PhaistosSymbol(18), new PhaistosSymbol(23, vowel=true), new PhaistosSymbol(16), '|', new PhaistosSymbol(12), new PhaistosSymbol(20), new PhaistosSymbol(24), new PhaistosSymbol(33, vowel=true), '|', new PhaistosSymbol(27, vegas=true), new PhaistosSymbol(25), new PhaistosSymbol(22), '|', new PhaistosSymbol(5), new PhaistosSymbol(23, vowel=true), new PhaistosSymbol(37), new PhaistosSymbol(2, vegas=true), '|', new PhaistosSymbol(35, vowel=true), new PhaistosSymbol(7, vowel=true), new PhaistosSymbol(45, vowel=true), new PhaistosSymbol(27, vegas=true), '|', new PhaistosSymbol(7, vowel=true), new PhaistosSymbol(40), new PhaistosSymbol(22), new PhaistosSymbol(12), new PhaistosSymbol(2, vegas=true)]];
            }

            // Creating list of possible symbols for those without substitutions
            possibleSymbols = ['κ', 'χ', 'ι', 'γ', 'π', 'φ', 'β', 'υ', 'τ', 'θ', 'δ', '῾', 'λ', 'μ', 'ν', 'γ', 'ρ', 'ῤ', 'σ', 'ζ', 'ξ', 'ψ', 'ζ', 'ᾰ', 'ᾱ', 'η', 'ε', "ει", 'ῐ', 'ῑ', 'ω', 'ο', "ου", 'ῠ', 'ῡ', "αι", "αυ", "ει", "ευ", "οι", "υι", 'ᾳ', 'ῃ', 'ῳ'];
            possibleVegasSymbols = ['α', 'ε', 'η', 'ι', 'o', 'υ', 'ω', 'σ', 'ρ', 'ν'];
            possibleVowelSymbols = ['α', 'ε', 'η', 'ι', 'o', 'υ', 'ω'];
            hexSymbols = ["", "&#x101D0", "&#x101D1", "&#x101D2", "&#x101D3", "&#x101D4", "&#x101D5", "&#x101D6", "&#x101D7", "&#x101D8", "&#x101D9", "&#x101DA", "&#x101DB", "&#x101DC", "&#x101DD", "&#x101DE", "&#x101DF", "&#x101E0", "&#x101E1", "&#x101E2", "&#x101E3", "&#x101E4", "&#x101E5", "&#x101E6", "&#x101E7", "&#x101E8", "&#x101E9", "&#x101EA", "&#x101EB", "&#x101EC", "&#x101ED", "&#x101EE", "&#x101EF", "&#x101F0", "&#x101F1", "&#x101F2", "&#x101F3", "&#x101F4", "&#x101F5", "&#x101F6", "&#x101F7", "&#x101F8", "&#x101F9", "&#x101FA", "&#x101FB", "&#x101FC", "#"];
            singleSubs = Array.from({length: 47}, (_, i) => "Unsubstituted");
            subTracker = Array.from({length: 47}, (_, i) => "Unsubstituted");
            substitutions = substitutions.split(',');

            // Loop through substitions, replacing values in single subs with the values from the substitution
            for(let i = 0; i < substitutions.length; i++){
                try{
                    singleSubs[i+1] = substitutions[i];
                    subTracker[i+1] = "Subbed";
                } catch {
                    continue;
                }
            }
            
            for(let i = 0; i < singleSubs.length; i++){
                if(singleSubs[i] === "Unsubstituted"){
                    singleSubs[i] = possibleSymbols[Math.floor(Math.random() * possibleSymbols.length)];
                }
            }

            // Loop through disk symbols, replacing values with the substitutions
            for(i = 0; i < diskSymbols.length; i++){
                let tempSymbolString = "", tempSubString = "", tempIndexString = "";
                for(j = 0; j < diskSymbols[i].length; j++){
                    if(diskSymbols[i][j] === "|"){
                        tempSymbolString += " | ";
                        tempSubString += " | ";
                        tempIndexString += " | ";
                    } else {
                        tempSymbolString += hexSymbols[diskSymbols[i][j].index] + " ";
                        tempIndexString += diskSymbols[i][j].index + " ";

                        if(subTracker[diskSymbols[i][j].index] === "Subbed"){
                            tempSubString += singleSubs[diskSymbols[i][j].index] + " ";
                        } else {
                            if(diskSymbols[i][j].vowel){
                                tempSubString += possibleVowelSymbols[Math.floor(Math.random() * possibleVowelSymbols.length)] + " ";
                            } else if(diskSymbols[i][j].vegas){
                                tempSubString += possibleVegasSymbols[Math.floor(Math.random() * possibleVegasSymbols.length)] + " ";
                            } else {
                                tempSubString += possibleSymbols[Math.floor(Math.random() * possibleSymbols.length)] + " ";
                            }
                        }
                    }
                }
                
                returnString += tempSymbolString + "\n" + tempIndexString + "\n" + tempSubString + "\n\n";
            }

            return returnString;
        }
    </script>
</body>
</html>